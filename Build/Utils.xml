<Project DefaultTargets="Rebuild" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />

  <Target Name="IncVersion">    
    <Message Text="===============================================================" Importance="high" />
    <Message Text="Task    : IncVersion" />
    <Message Text="Version : $(Version)"/>
    <Message Text="===============================================================" />

    <FileUpdate Files='..\Project\Version\Version.cs'
      Regex='AssemblyFileVersion\("(.+)"\)'
      ReplacementText='AssemblyFileVersion("$(Version)")' />

    <Message Text="===============================================================" />
  </Target>

  <Target Name="DeleteFiles">

    <Message Text="===============================================================" />
    <Message Text="Task    : DeleteFiles" />
    <Message Text="===============================================================" />

    <RemoveDir Directories="35" />
    <RemoveDir Directories="40" />
    <RemoveDir Directories="45" />
  </Target>

  <Target Name="Deploy">

    <Message Text="===============================================================" />
    <Message Text="Task    : Deploy" />
    <Message Text="Path    : $(DeployPath)" />
    <Message Text="===============================================================" />

    <ItemGroup>
      <ZipFilesExclude Include="*.*" />
    </ItemGroup>
    <ItemGroup>
      <ZipFiles Include="**\*.*" Exclude="@(ZipFilesExclude)" />
    </ItemGroup>
    <Zip Files="@(ZipFiles)" ZipFileName="$(DeployPath)\$(Version).zip" />
  </Target>

</Project>
